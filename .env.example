# =============================================================================
# COMPANY-INFORMATION ORG OS - ENVIRONMENT VARIABLES
# =============================================================================
# This is the SINGLE SOURCE OF TRUTH for all environment variables.
# All services (jobs, dashboard, scripts) read from the ROOT .env file.
#
# SETUP:
#   1. Copy this file to .env in the ROOT directory: cp .env.example .env
#   2. Fill in your actual values (never commit .env to git)
#   3. All services will automatically inherit these values
# =============================================================================

# -----------------------------------------------------------------------------
# CORE SYSTEM CONFIGURATION
# -----------------------------------------------------------------------------

# Node Environment
NODE_ENV=development

# Logging Configuration
LOG_LEVEL=info

# Project Root (auto-detected - override only if needed)
# Leave empty for automatic detection via PathResolver
PROJECT_ROOT=

# -----------------------------------------------------------------------------
# GITHUB CONFIGURATION
# -----------------------------------------------------------------------------

# GitHub Personal Access Token (required)
# Scopes needed: repo, read:org, workflow
GITHUB_TOKEN=your_github_personal_access_token_here

# GitHub Organization
GITHUB_ORG=Ai-Whisperers

# OAuth App Credentials (for dashboard authentication)
GITHUB_CLIENT_ID=your_github_oauth_app_client_id
GITHUB_CLIENT_SECRET=your_github_oauth_app_client_secret

# -----------------------------------------------------------------------------
# AZURE DEVOPS CONFIGURATION
# -----------------------------------------------------------------------------

# Azure DevOps Personal Access Token
AZURE_DEVOPS_PAT=your_azure_devops_personal_access_token_here

# Azure DevOps Organization
AZURE_DEVOPS_ORG=aiwhisperer

# Azure DevOps Project
AZURE_DEVOPS_PROJECT=Business Setup

# Azure DevOps Base URL
AZURE_DEVOPS_BASE_URL=https://dev.azure.com/aiwhisperer

# -----------------------------------------------------------------------------
# DATABASE CONFIGURATION
# -----------------------------------------------------------------------------

# Primary Database URL
# Development (SQLite): file:./services/jobs/prisma/dev.db
# Production (PostgreSQL): postgresql://user:password@host:5432/dbname
DATABASE_URL=file:./services/jobs/prisma/dev.db

# -----------------------------------------------------------------------------
# REDIS CONFIGURATION (Job Queues)
# -----------------------------------------------------------------------------

# Redis Connection
REDIS_HOST=localhost
REDIS_PORT=6379

# Optional: Full Redis URL (overrides HOST/PORT if set)
# REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# SERVICE PORTS
# -----------------------------------------------------------------------------

# Jobs Service (NestJS Backend)
JOBS_PORT=4000

# Dashboard (Express Frontend)
DASHBOARD_PORT=3001

# -----------------------------------------------------------------------------
# SERVICE URLs (Auto-constructed from ports)
# -----------------------------------------------------------------------------

# Jobs Service API URL
JOBS_SERVICE_URL=http://localhost:4000

# Dashboard URL (for CORS, OAuth redirects)
DASHBOARD_URL=http://localhost:3001

# Frontend URL (for jobs service CORS)
FRONTEND_URL=http://localhost:3001

# -----------------------------------------------------------------------------
# AUTHENTICATION & SECURITY
# -----------------------------------------------------------------------------

# Internal API Key (for service-to-service communication)
JOBS_API_KEY=your_internal_api_key_change_in_production

# -----------------------------------------------------------------------------
# NOTIFICATION SERVICES
# -----------------------------------------------------------------------------

# Slack Webhook (optional)
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# Microsoft Teams Webhook (optional)
TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/YOUR/WEBHOOK/URL

# -----------------------------------------------------------------------------
# FEATURE FLAGS
# -----------------------------------------------------------------------------

# Enable/disable Azure DevOps synchronization
ENABLE_ADO_SYNC=true

# Enable/disable Slack notifications
ENABLE_SLACK_NOTIFICATIONS=false

# Enable/disable automatic repair workflows
ENABLE_AUTO_REPAIR=false

# -----------------------------------------------------------------------------
# FILE SYSTEM ACCESS (MCP Server)
# -----------------------------------------------------------------------------

# Filesystem root for MCP server access
# Default: Auto-detected parent directory of AI-Whisperers repos
FILESYSTEM_ROOT=

# Allow write operations via MCP
FILESYSTEM_ALLOW_WRITE=true

# -----------------------------------------------------------------------------
# DEVELOPMENT & TESTING
# -----------------------------------------------------------------------------

# Test Database URL (for running tests)
TEST_DATABASE_URL=file:./services/jobs/test.db

# Test GitHub Token (use a token with limited scope for tests)
TEST_GITHUB_TOKEN=

# Skip Redis in tests (set to 'true' to use mock queue)
SKIP_REDIS_IN_TESTS=true

# =============================================================================
# NOTES:
# -----------------------------------------------------------------------------
# - All services inherit from this ROOT .env file
# - Never commit .env (only .env.example)
# - Use .env.local for local overrides (also gitignored)
# - Jobs service reads: ROOT/.env (not services/jobs/.env)
# - Dashboard reads: ROOT/.env (not apps/dashboard/.env)
# - Scripts use PathResolver which auto-detects PROJECT_ROOT
# =============================================================================
